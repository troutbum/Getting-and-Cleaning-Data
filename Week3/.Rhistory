View(GDPx)
# Getting and Cleaning Data
# May 2014
# Quiz 3
# Question 3
# Load the Gross Domestic Product data for the 190 ranked countries in this data set:
#
#         https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2FGDP.csv
#
# Load the educational data from this data set:
#
#         https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2FEDSTATS_Country.csv
#
# Match the data based on the country shortcode. How many of the IDs match? Sort
# the data frame in descending order by GDP rank. What is the 13th country in
# the resulting data frame?
#
# Original data sources:
#       http://data.worldbank.org/data-catalog/GDP-ranking-table
#       http://data.worldbank.org/data-catalog/ed-stats
#
# 190, St. Kitts and Nevis
# 189, St. Kitts and Nevis
# 189, Spain
# 234, St. Kitts and Nevis
# 234, Spain
# 190, Spain
# create a data subdirectory if it does not exist
if (!file.exists("data")) {
dir.create("data")
}
filePath <- "./data/"
# download dataset
fileName <- "getdata-data-GDP.csv"
fileUrl <- "https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2FGDP.csv"
xFile <- paste0(filePath, fileName)
if (!file.exists(xFile)) {
download.file(fileUrl, destfile = xFile, method ="curl")
dateDownloaded <- date()
}
# read in dataset
GDP <- read.csv(xFile, skip=4, blank.lines.skip=TRUE)
# download dataset
fileName <- "getdata-data-EDSTATS_Country.csv"
fileUrl <- "https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2FEDSTATS_Country.csv"
xFile <- paste0(filePath, fileName)
if (!file.exists(xFile)) {
download.file(fileUrl, destfile = xFile, method ="curl")
dateDownloaded <- date()
}
# read in dataset
ED <- read.csv(xFile)
EDx <- subset(ED,, c(CountryCode, Long.Name, Income.Group))     # remove extraneous columns
names(GDP)[1] <- "CountryCode"
names(GDP)[2] <- "Rank"
GDPx <- GDP[1:190,]                            # remove rows without data
View(GDPx)
GDPxx <- subset(GDPx,, c(CountryCode, Rank))      # remove extraneous columns
?read.csv
# create a data subdirectory if it does not exist
if (!file.exists("data")) {
dir.create("data")
}
filePath <- "./data/"
# download dataset
fileName <- "getdata-data-GDP.csv"
fileUrl <- "https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2FGDP.csv"
xFile <- paste0(filePath, fileName)
if (!file.exists(xFile)) {
download.file(fileUrl, destfile = xFile, method ="curl")
dateDownloaded <- date()
}
# read in dataset
GDP <- read.csv(xFile, skip=4, nrows=190)
# download dataset
fileName <- "getdata-data-EDSTATS_Country.csv"
fileUrl <- "https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2FEDSTATS_Country.csv"
xFile <- paste0(filePath, fileName)
if (!file.exists(xFile)) {
download.file(fileUrl, destfile = xFile, method ="curl")
dateDownloaded <- date()
}
# read in dataset
ED <- read.csv(xFile)
EDx <- subset(ED,, c(CountryCode, Long.Name, Income.Group))     # remove extraneous columns
names(GDP)[1] <- "CountryCode"
names(GDP)[2] <- "Rank"
GDPx <- subset(GDP,, c(CountryCode, Rank))      # remove extraneous columns
library(plyr)
joint = join(GDPx, EDx, by="CountryCode")                                          # 190 matches, Spain is 13th
View(joint)
table(joint$Income.Group)                                       # check numbers of each group
OECD <- joint[ which(joint$Income.Group==
'High income: OECD'),]
View(OECD)
row.names(OECD) <- NULL                                      # remove row.names system added column
View(OECD)
nonOECD <- joint[ which(joint$Income.Group==
'High income: nonOECD'),]
View(OECD)
View(nonOECD)
row.names(OECD) <- NULL
View(nonOECD)
View(nonOECD)
row.names(nonOECD) <- NULL
View(nonOECD)
View(joint)
View(joint)
View(joint)
avgRankOECD <- mean(OECD[,2])
avgRankOECD <- mean(OECD[,Rank])
avgRankOECD <- mean(OECD[,OECD$Rank])
avgRankOECD <- mean(OECD[,2])
View(OECD)
# Getting and Cleaning Data
# May 2014
# Quiz 3
# Question 3
# Load the Gross Domestic Product data for the 190 ranked countries in this data set:
#
#         https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2FGDP.csv
#
# Load the educational data from this data set:
#
#         https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2FEDSTATS_Country.csv
#
# Match the data based on the country shortcode. How many of the IDs match? Sort
# the data frame in descending order by GDP rank. What is the 13th country in
# the resulting data frame?
#
# Original data sources:
#       http://data.worldbank.org/data-catalog/GDP-ranking-table
#       http://data.worldbank.org/data-catalog/ed-stats
#
# 190, St. Kitts and Nevis
# 189, St. Kitts and Nevis
# 189, Spain
# 234, St. Kitts and Nevis
# 234, Spain
# 190, Spain
# create a data subdirectory if it does not exist
if (!file.exists("data")) {
dir.create("data")
}
filePath <- "./data/"
# download dataset
fileName <- "getdata-data-GDP.csv"
fileUrl <- "https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2FGDP.csv"
xFile <- paste0(filePath, fileName)
if (!file.exists(xFile)) {
download.file(fileUrl, destfile = xFile, method ="curl")
dateDownloaded <- date()
}
# read in dataset
GDP <- read.csv(xFile, skip=4, nrows=190)       # BIG LESSON limit row reads with wonky data
# weird unstable behavior downstream
# download dataset
fileName <- "getdata-data-EDSTATS_Country.csv"
fileUrl <- "https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2FEDSTATS_Country.csv"
xFile <- paste0(filePath, fileName)
if (!file.exists(xFile)) {
download.file(fileUrl, destfile = xFile, method ="curl")
dateDownloaded <- date()
}
# read in dataset
ED <- read.csv(xFile)
EDx <- subset(ED,, c(CountryCode, Long.Name, Income.Group))     # remove extraneous columns
# cleanup GDP df
names(GDP)[1] <- "CountryCode"
names(GDP)[2] <- "Rank"
GDPx <- subset(GDP,, c(CountryCode, Rank))      # remove extraneous columns
library(plyr)
joint = join(GDPx, EDx, by="CountryCode")                                          # 190 matches, Spain is 13th
joint
# Question 4
# What is the average GDP ranking for the "High income: OECD" and "High income: nonOECD" group?
# 32.96667, 91.91304
# 23.966667, 30.91304
# 23, 45
# 23, 30
# 30, 37
# 133.72973, 32.96667
# use aggregate() to create dataset that contains the average
table(joint$Income.Group)  # check numbers of each group
OECD <- joint[ which(joint$Income.Group=='High income: OECD'),]
row.names(OECD) <- NULL                                         # removes row.names system added column
nonOECD <- joint[ which(joint$Income.Group=='High income: nonOECD'),]
row.names(nonOECD) <- NULL
avgRankOECD <- mean(OECD[,2])
avgRankOECD
avgRanknonOECD <- mean(nonOECD[,2])
avgRanknonOECD
print(joint[,1:2])
print(head(joint[,1:2]), 20)
?head
print(head(joint[,1:2]), n=20)
print(head(joint[,1:2], n=20))
# Getting and Cleaning Data
# May 2014
# Quiz 3
# Question 3
# Load the Gross Domestic Product data for the 190 ranked countries in this data set:
#
#         https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2FGDP.csv
#
# Load the educational data from this data set:
#
#         https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2FEDSTATS_Country.csv
#
# Match the data based on the country shortcode. How many of the IDs match? Sort
# the data frame in descending order by GDP rank. What is the 13th country in
# the resulting data frame?
#
# Original data sources:
#       http://data.worldbank.org/data-catalog/GDP-ranking-table
#       http://data.worldbank.org/data-catalog/ed-stats
#
# 190, St. Kitts and Nevis
# 189, St. Kitts and Nevis
# 189, Spain
# 234, St. Kitts and Nevis
# 234, Spain
# 190, Spain
# create a data subdirectory if it does not exist
if (!file.exists("data")) {
dir.create("data")
}
filePath <- "./data/"
# download dataset
fileName <- "getdata-data-GDP.csv"
fileUrl <- "https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2FGDP.csv"
xFile <- paste0(filePath, fileName)
if (!file.exists(xFile)) {
download.file(fileUrl, destfile = xFile, method ="curl")
dateDownloaded <- date()
}
# read in dataset
GDP <- read.csv(xFile, skip=4, nrows=190)       # BIG LESSON limit row reads with wonky data
# weird unstable behavior downstream
# download dataset
fileName <- "getdata-data-EDSTATS_Country.csv"
fileUrl <- "https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2FEDSTATS_Country.csv"
xFile <- paste0(filePath, fileName)
if (!file.exists(xFile)) {
download.file(fileUrl, destfile = xFile, method ="curl")
dateDownloaded <- date()
}
# read in dataset
ED <- read.csv(xFile)
EDx <- subset(ED,, c(CountryCode, Long.Name, Income.Group))     # remove extraneous columns
# cleanup GDP df
names(GDP)[1] <- "CountryCode"
names(GDP)[2] <- "Rank"
GDPx <- subset(GDP,, c(CountryCode, Rank))      # remove extraneous columns
library(plyr)
joint = join(GDPx, EDx, by="CountryCode")                                          # 190 matches, Spain is 13th
print(head(joint[,1:2], n=20))
# Question 4
# What is the average GDP ranking for the "High income: OECD" and "High income: nonOECD" group?
# 32.96667, 91.91304
# 23.966667, 30.91304
# 23, 45
# 23, 30
# 30, 37
# 133.72973, 32.96667
# use aggregate() to create dataset that contains the average
table(joint$Income.Group)  # check numbers of each group
OECD <- joint[ which(joint$Income.Group=='High income: OECD'),]
row.names(OECD) <- NULL                                         # removes row.names system added column
nonOECD <- joint[ which(joint$Income.Group=='High income: nonOECD'),]
row.names(nonOECD) <- NULL
avgRankOECD <- mean(OECD[,2])
avgRankOECD
avgRanknonOECD <- mean(nonOECD[,2])
avgRanknonOECD
quantile(joint$Income.Group,probs=c(0.2,0.4,0.6,0.8))
quantile(joint$Income.Group)
quantile(joint$Rank,probs=c(0.2,0.4,0.6,0.8))
quantile(joint$Rank,probs=c(0.1,0.3,0.5,0.7,0.9,))
quantile(joint$Rank,probs=c(0.1,0.3,0.5,0.7,0.9))
?table
table(joint$Income.Group)
table(joint$Income.Group,joint$Rank)
table(joint$Income.Group,quantile(joint$Rank,probs=c(0.1,0.3,0.5,0.7,0.9)))
table(joint$Income.Group,joint$rank)
table(joint$Income.Group, joint$rank)
View(joint)
income <- joint$Income.Group == "Lower middle income"
summary(income)
ranking <- joint$Rank >= 38
summary(ranking)
ranking <- joint$Rank <= 38
summary(ranking)
both = income & ranking
summary(both)
which(both)
joint(both)
joint[both]
joint[both,]
# Getting and Cleaning Data
# May 2014
# Quiz 3
# Question 3
# Load the Gross Domestic Product data for the 190 ranked countries in this data set:
#
#         https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2FGDP.csv
#
# Load the educational data from this data set:
#
#         https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2FEDSTATS_Country.csv
#
# Match the data based on the country shortcode. How many of the IDs match? Sort
# the data frame in descending order by GDP rank. What is the 13th country in
# the resulting data frame?
#
# Original data sources:
#       http://data.worldbank.org/data-catalog/GDP-ranking-table
#       http://data.worldbank.org/data-catalog/ed-stats
#
# 190, St. Kitts and Nevis
# 189, St. Kitts and Nevis
# 189, Spain
# 234, St. Kitts and Nevis
# 234, Spain
# 190, Spain
# create a data subdirectory if it does not exist
if (!file.exists("data")) {
dir.create("data")
}
filePath <- "./data/"
# download dataset
fileName <- "getdata-data-GDP.csv"
fileUrl <- "https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2FGDP.csv"
xFile <- paste0(filePath, fileName)
if (!file.exists(xFile)) {
download.file(fileUrl, destfile = xFile, method ="curl")
dateDownloaded <- date()
}
# read in dataset
GDP <- read.csv(xFile, skip=4, nrows=190)       # BIG LESSON limit row reads with wonky data
# weird unstable behavior downstream
# download dataset
fileName <- "getdata-data-EDSTATS_Country.csv"
fileUrl <- "https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2FEDSTATS_Country.csv"
xFile <- paste0(filePath, fileName)
if (!file.exists(xFile)) {
download.file(fileUrl, destfile = xFile, method ="curl")
dateDownloaded <- date()
}
# read in dataset
ED <- read.csv(xFile)
EDx <- subset(ED,, c(CountryCode, Long.Name, Income.Group))     # remove extraneous columns
# cleanup GDP df
names(GDP)[1] <- "CountryCode"
names(GDP)[2] <- "Rank"
GDPx <- subset(GDP,, c(CountryCode, Rank))      # remove extraneous columns
library(plyr)
joint = join(GDPx, EDx, by="CountryCode")                                          # 190 matches, Spain is 13th
print(head(joint[,1:2], n=20))
# Question 4
# What is the average GDP ranking for the "High income: OECD" and "High income: nonOECD" group?
# 32.96667, 91.91304
# 23.966667, 30.91304
# 23, 45
# 23, 30
# 30, 37
# 133.72973, 32.96667
# use aggregate() to create dataset that contains the average
table(joint$Income.Group)  # check numbers of each group
OECD <- joint[ which(joint$Income.Group=='High income: OECD'),]
row.names(OECD) <- NULL                                         # removes row.names system added column
nonOECD <- joint[ which(joint$Income.Group=='High income: nonOECD'),]
row.names(nonOECD) <- NULL
avgRankOECD <- mean(OECD[,2])
avgRankOECD
avgRanknonOECD <- mean(nonOECD[,2])
avgRanknonOECD
# Question 5
# Cut the GDP ranking into 5 separate quantile groups. Make a table versus
# Income.Group. How many countries are Lower middle income but among the 38
# nations with highest GDP?
# 1
# 13
# 5
# 3
quantile(joint$Rank,probs=c(0.1,0.3,0.5,0.7,0.9))
table(joint$Income.Group)
# create logical vectors
income <- joint$Income.Group == "Lower middle income"
summary(income)
ranking <- joint$Rank <= 38
summary(ranking)
both = income & ranking
summary(both)
which(both)
joint[both,]            # produces a list of countries meeting both conditions
View(ED)
View(GDP)
x <- read.csv(xFile, skip=4 na.omit=TRUE)
x <- read.csv(xFile, skip=4, na.omit=TRUE)
fileName <- "getdata-data-GDP.csv"
fileUrl <- "https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2FGDP.csv"
xFile <- paste0(filePath, fileName)
x <- read.csv(xFile, skip=4)
View(x)
View(x)
# Getting and Cleaning Data
# May 2014
# Quiz 3
# Question 3
# Load the Gross Domestic Product data for the 190 ranked countries in this data set:
#
#         https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2FGDP.csv
#
# Load the educational data from this data set:
#
#         https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2FEDSTATS_Country.csv
#
# Match the data based on the country shortcode. How many of the IDs match? Sort
# the data frame in descending order by GDP rank. What is the 13th country in
# the resulting data frame?
#
# Original data sources:
#       http://data.worldbank.org/data-catalog/GDP-ranking-table
#       http://data.worldbank.org/data-catalog/ed-stats
#
# 190, St. Kitts and Nevis
# 189, St. Kitts and Nevis
# 189, Spain
# 234, St. Kitts and Nevis
# 234, Spain
# 190, Spain
# create a data subdirectory if it does not exist
if (!file.exists("data")) {
dir.create("data")
}
filePath <- "./data/"
# download dataset
fileName <- "getdata-data-GDP.csv"
fileUrl <- "https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2FGDP.csv"
xFile <- paste0(filePath, fileName)
if (!file.exists(xFile)) {
download.file(fileUrl, destfile = xFile, method ="curl")
dateDownloaded <- date()
}
# read in dataset
GDP <- read.csv(xFile, skip=4)       # BIG LESSON limit row reads with wonky data
#GDP <- read.csv(xFile, skip=4, nrows=190)       # weird unstable behavior downstream
# download dataset
fileName <- "getdata-data-EDSTATS_Country.csv"
fileUrl <- "https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2FEDSTATS_Country.csv"
xFile <- paste0(filePath, fileName)
if (!file.exists(xFile)) {
download.file(fileUrl, destfile = xFile, method ="curl")
dateDownloaded <- date()
}
# read in dataset
ED <- read.csv(xFile)
EDx <- subset(ED,, c(CountryCode, Long.Name, Income.Group))     # remove extraneous columns
# cleanup GDP df
names(GDP)[1] <- "CountryCode"
names(GDP)[2] <- "Rank"
GDPx <- subset(GDP,, c(CountryCode, Rank))      # remove extraneous columns
library(plyr)
joint = join(GDPx, EDx, by="CountryCode")                                          # 190 matches, Spain is 13th
print(head(joint[,1:2], n=20))
# Question 4
# What is the average GDP ranking for the "High income: OECD" and "High income: nonOECD" group?
# 32.96667, 91.91304
# 23.966667, 30.91304
# 23, 45
# 23, 30
# 30, 37
# 133.72973, 32.96667
# use aggregate() to create dataset that contains the average
table(joint$Income.Group)  # check numbers of each group
OECD <- joint[ which(joint$Income.Group=='High income: OECD'),]
row.names(OECD) <- NULL                                         # removes row.names system added column
nonOECD <- joint[ which(joint$Income.Group=='High income: nonOECD'),]
row.names(nonOECD) <- NULL
avgRankOECD <- mean(OECD[,2])
avgRankOECD
avgRanknonOECD <- mean(nonOECD[,2])
avgRanknonOECD
# Question 5
# Cut the GDP ranking into 5 separate quantile groups. Make a table versus
# Income.Group. How many countries are Lower middle income but among the 38
# nations with highest GDP?
# 1
# 13
# 5
# 3
quantile(joint$Rank,probs=c(0.1,0.3,0.5,0.7,0.9))
table(joint$Income.Group)
# create logical vectors
income <- joint$Income.Group == "Lower middle income"
summary(income)
ranking <- joint$Rank <= 38
summary(ranking)
both = income & ranking
summary(both)
which(both)
joint[both,]            # produces a list of countries meeting both conditions
View(joint)
View(GDP)
View(ED)
View(ED)
t <-ED[,ED$CountryCode]
t <-ED[,1]
t <-as.character(ED[,1])
v <-as.character(GDP[,1])
match(t,v)
